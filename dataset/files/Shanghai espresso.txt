Nel 1931 la Cina è coinvolta in una guerra civile. Gli amici del capitano britannico Donald "Doc" Harvey (Clive Brook) lo invidiano perché la famigerata Shanghai Lily (Marlene Dietrich) è una compagna di viaggio del treno espresso da Pechino a Shanghai. Poiché il nome non gli dice nulla, lo informano che è una "sottobicchiere" o "una donna che vive di ingegno lungo la costa cinese" - in altre parole, una cortigiana. Durante il viaggio, Harvey incontra Lily, che si scopre essere la sua ex amante, Madeline. Cinque anni prima, aveva giocato uno scherzo ad Harvey per valutare il suo amore per lei, ma si era ritorto contro e lui l'aveva lasciata. Lei lo informa francamente che, nel frattempo, "Ci è voluto più di un uomo per cambiare il mio nome in Shanghai Lily". Quando Lily chiarisce che tiene ancora profondamente a lui, diventa evidente che anche i suoi sentimenti non sono cambiati quando vede inavvertitamente l'orologio che gli ha regalato con la sua fotografia ancora dentro.
Tra gli altri passeggeri ci sono la collega delle montagne russe Hui Fei (Anna May Wong), la compagna di Lily; Il missionario cristiano Mr. Carmichael (Lawrence Grant), che inizialmente condanna le due "donne cadute"; il giocatore d'azzardo incallito Sam Salt (Eugene Pallette); lo spacciatore di oppio Eric Baum (Gustav von Seyffertitz); la governante della pensione, la signora Haggerty (Louise Closser Hale); L'ufficiale francese Maggiore Lenard (Emile Chautard) e un misterioso eurasiatico, Henry Chang (Warner Oland).
I soldati del governo cinese salgono, perquisiscono il treno e catturano un agente ribelle di alto rango. Chang si dirige quindi verso un ufficio telegrafico e invia un messaggio in codice. Successivamente, il treno viene fermato e preso in consegna dall'esercito ribelle e dal suo potente signore della guerra, che si scopre essere Chang. Chang inizia a interrogare i passeggeri, alla ricerca di qualcuno abbastanza importante da scambiare con il suo prezioso aiutante. Trova quello che vuole in Harvey, che sta per eseguire un intervento chirurgico al cervello sul governatore generale di Shanghai. Chang si offre di portare Shanghai Lily al suo palazzo, ma lei afferma di essersi riformata. Quando Chang rifiuta di accettare la sua risposta, Harvey irrompe e lo stende. Poiché Chang ha bisogno di Harvey vivo, ingoia (ma non dimentica) l'insulto. Chang poi si fa portare Hui Fei nei suoi alloggi, dove si impone su di lei.
Il governo rilascia l'uomo di Chang, ma Chang decide di accecare Harvey per la sua insolenza. Per amore, Lily si offre in cambio del rilascio sicuro di Harvey. Harvey rimane ignaro del pericolo in cui si trova e del motivo per cui Lily è andata con Chang. Chang viene pugnalato a morte da Hui Fei che racconta ad Harvey cosa è successo. Trovando Lily, il trio sale sul treno e parte prima che il corpo venga scoperto. Il missionario Carmichael, fidandosi del suo istinto, convince Lily a rivelare la verità sul salvataggio di Harvey. Insiste affinché non illumini Harvey perché l'amore deve andare di pari passo con la fede. Quando il treno finalmente raggiunge Shanghai sano e salvo, Lily offre ad Harvey il suo amore incondizionatamente, ma pretende lo stesso in cambio. Harvey finalmente crolla e la abbraccia.